{
  "template_dirname": "query_templates",
  "output_dirname": "query_output",
  "parameters": {
    "a-planet-db": {
      "host_address": "rds.amazonaws.com",
      "superuser": "postgres",
      "db_name": "planet",
      "db_schema": "public",
      "gbmi_schema": "gbmi",
      "new_users": [
        {
          "new_user": "adam",
          "password": "xyzxyz"
        },
        {
          "new_user": "hana",
          "password": "abcabc"
        }
      ]
    },
    "b-rasters-and-gadm": {
      "host_address": "rds.amazonaws.com",
      "db_name": "openstreetmap",
      "db_schema": "public",
      "user": "tom",
      "gadm_source_file": "/data/gadm36_shp/gadm36.shp",
      "gadm_target_table": "gadm36",
      "rasters": [
        {
          "raster_name": "worldpop2020",
          "raster_source_file": "/data/worldpop/ppp_2020_1km_aggregated.tif",
          "raster_target_table": "raw_tiles_worldpop2020",
          "raster_population": "cell_population"
        },
        {
          "raster_name": "guf",
          "raster_source_file": "/data/GUF_tile/guf_tile_4326.tif",
          "raster_target_table": "raw_tiles_guf"
        }
      ],
      "agg_levels": [
        {
          "source_table": "gadm36",
          "agg_level": "admin_div5",
          "agg_geom": "geom",
          "agg_columns": "name_0 AS country,\n                                                            name_1 AS admin_div1,\n                                                            name_2 AS admin_div2,\n                                                            name_3 AS admin_div3,\n                                                            name_4 AS admin_div4,\n                                                            name_5 AS admin_div5",
          "order_columns": "name_0, name_1, name_2, name_3, name_4, name_5"
        },
        {
          "source_table": "agg_gadm36_geom_areas_admin_div5",
          "agg_level": "admin_div4",
          "agg_geom": "geom",
          "agg_columns": "country,\n                                                            admin_div1,\n                                                            admin_div2,\n                                                            admin_div3,\n                                                            admin_div4",
          "order_columns": "country, admin_div1, admin_div2, admin_div3, admin_div4"
        },
        {
          "source_table": "agg_gadm36_geom_areas_admin_div4",
          "agg_level": "admin_div3",
          "agg_geom": "agg_geom_admin_div4",
          "agg_columns": "country,\n                                                            admin_div1,\n                                                            admin_div2,\n                                                            admin_div3",
          "order_columns": "country, admin_div1, admin_div2, admin_div3"
        },
        {
          "source_table": "agg_gadm36_geom_areas_admin_div3",
          "agg_level": "admin_div2",
          "agg_geom": "agg_geom_admin_div3",
          "agg_columns": "country,\n                                                            admin_div1,\n                                                            admin_div2",
          "order_columns": "country, admin_div1, admin_div2"
        },
        {
          "source_table": "agg_gadm36_geom_areas_admin_div2",
          "agg_level": "admin_div1",
          "agg_geom": "agg_geom_admin_div2",
          "agg_columns": "country,\n                                                            admin_div1",
          "order_columns": "country, admin_div1"
        },
        {
          "source_table": "agg_gadm36_geom_areas_admin_div1",
          "agg_level": "country",
          "agg_geom": "agg_geom_admin_div1",
          "agg_columns": "country",
          "order_columns": "country"
        }
      ]
    },
    "c-gbmi": {
      "db_schema": "public",
      "gbmi_schema": "gbmi",
      "misc_schema": "misc",
      "raster_names": [
        {
          "raster_name": "guf"
        },
        {
          "raster_name": "worldpop2020",
          "raster_population": "cell_population"
        }
      ],
      "buffers": [
        {
          "buffer": 25
        },
        {
          "buffer": 50
        },
        {
          "buffer": 100
        }
      ],
      "agg_levels": [
        {
          "agg_level": "cell",
          "agg_columns": "cell_id, cell_country, cell_admin_div1, cell_admin_div2, cell_admin_div3, cell_admin_div4, cell_admin_div5",
          "agg_geom": "cell_geom",
          "agg_area": "cell_area",
          "join_clause": "",
          "order_columns": "cell_country, cell_admin_div1, cell_admin_div2, cell_admin_div3, cell_admin_div4, cell_admin_div5, cell_id"
        },
        {
          "agg_level": "admin_div5",
          "agg_columns": "cell_country, cell_admin_div1, cell_admin_div2, cell_admin_div3, cell_admin_div4, cell_admin_div5",
          "agg_geom": "agg_geom_admin_div5",
          "agg_area": "agg_area_admin_div5",
          "join_clause": "LEFT JOIN public.agg_gadm36_geom_areas_admin_div5 agga ON bga.cell_country = agga.country AND bga.cell_admin_div1 = agga.admin_div1 AND bga.cell_admin_div2 = agga.admin_div2 AND bga.cell_admin_div3 = agga.admin_div3 AND bga.cell_admin_div4 = agga.admin_div4 AND bga.cell_admin_div5 = agga.admin_div5",
          "order_columns": "cell_country, cell_admin_div1, cell_admin_div2, cell_admin_div3, cell_admin_div4, cell_admin_div5"
        },
        {
          "agg_level": "admin_div4",
          "agg_columns": "cell_country, cell_admin_div1, cell_admin_div2, cell_admin_div3, cell_admin_div4",
          "agg_geom": "agg_geom_admin_div4",
          "agg_area": "agg_area_admin_div4",
          "join_clause": "LEFT JOIN public.agg_gadm36_geom_areas_admin_div4 agga ON bga.cell_country = agga.country AND bga.cell_admin_div1 = agga.admin_div1 AND bga.cell_admin_div2 = agga.admin_div2 AND bga.cell_admin_div3 = agga.admin_div3 AND bga.cell_admin_div4 = agga.admin_div4",
          "order_columns": "cell_country, cell_admin_div1, cell_admin_div2, cell_admin_div3, cell_admin_div4"
        },
        {
          "agg_level": "admin_div3",
          "agg_columns": "cell_country, cell_admin_div1, cell_admin_div2, cell_admin_div3",
          "agg_geom": "agg_geom_admin_div3",
          "agg_area": "agg_area_admin_div3",
          "join_clause": "LEFT JOIN public.agg_gadm36_geom_areas_admin_div3 agga ON bga.cell_country = agga.country AND bga.cell_admin_div1 = agga.admin_div1 AND bga.cell_admin_div2 = agga.admin_div2 AND bga.cell_admin_div3 = agga.admin_div3",
          "order_columns": "cell_country, cell_admin_div1, cell_admin_div2, cell_admin_div3"
        },
        {
          "agg_level": "admin_div2",
          "agg_columns": "cell_country, cell_admin_div1, cell_admin_div2",
          "agg_geom": "agg_geom_admin_div2",
          "agg_area": "agg_area_admin_div2",
          "join_clause": "LEFT JOIN public.agg_gadm36_geom_areas_admin_div2 agga ON bga.cell_country = agga.country AND bga.cell_admin_div1 = agga.admin_div1 AND bga.cell_admin_div2 = agga.admin_div2",
          "order_columns": "cell_country, cell_admin_div1, cell_admin_div2"
        },
        {
          "agg_level": "admin_div1",
          "agg_columns": "cell_country, cell_admin_div1",
          "agg_geom": "agg_geom_admin_div1",
          "agg_area": "agg_area_admin_div1",
          "join_clause": "LEFT JOIN public.agg_gadm36_geom_areas_admin_div1 agga ON bga.cell_country = agga.country AND bga.cell_admin_div1 = agga.admin_div1",
          "order_columns": "cell_country, cell_admin_div1"
        },
        {
          "agg_level": "country",
          "agg_columns": "cell_country",
          "agg_geom": "agg_geom_country",
          "agg_area": "agg_area_country",
          "join_clause": "LEFT JOIN public.agg_gadm36_geom_areas_country agga ON bga.cell_country = agga.country",
          "order_columns": "cell_country"
        }
      ]
    }
  },
  "overwrite": true
}

